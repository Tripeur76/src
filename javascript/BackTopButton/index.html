<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Back to top button</title>

    <link rel="stylesheet" href="./style.css">
    <script defer src="./button_back_top.js"></script>

    <style>
        .btn-back-top {
            position: fixed;
            bottom: 0;
            right: 0;
            left: auto;
            margin: 1rem;
            background:none;
            color:#000;
            border: none;
            font-size:2rem;
            z-index: 10;
        }
        .btn-back-top:hover {cursor:pointer;}

        section {height:100vh;}
        section:nth-child(odd) {background:#ccc;}

        .d-none {display:none;}

    </style>
</head>
<body>
    <section></section>
    <section></section>
    <section></section>
    <section></section>
    <section></section>

    <script>
    // création du bouton 

        var btnHTML = document.createElement('button');
        // contenu HTML du bouton 
        //default : btnHTML.innerHTML = '<i class="fas fa-chevron-circle-up fa-2x text-muted"></i>';
        btnHTML.innerHTML = '^';

        // classes css du bouton
        var btnHTMLClassList = 'btn-back-top btn d-none';

        // ajoute chaque classe de btnHTMLClassList à l'élément btnHTML
        btnHTMLClassList.split(' ').forEach(className => {
            btnHTML.classList.add(className);
        });

    // intégration du bouton
        // Recherche la première balise <script> dans le body
        var insertBeforScript = document.body.querySelectorAll('script')[0];

        // Si une balise script est trouvée
        if(insertBeforScript) {
            // Insert le bouton avant la première balise <script>
            insertBeforScript.parentNode.insertBefore(btnHTML,insertBeforScript);
        // Si aucune balise script trouvée
        } else {
            // Insert le bouton avant la première balise <script>
            document.body.append(btnHTML);

        } 
    // Ecoute du scroll
        document.addEventListener('DOMContentLoaded', function() {
            // mise en écoute du scroll
            window.onscroll = function(ev) {
                // comparaison du positionnement du scroll
                if(window.pageYOffset > 200)
                {
                    // supprime la classe 'd-none' du bouton
                    document.querySelector(".btn-back-top").classList.remove('d-none'); 
                }  else{

                    // ajoute la classe 'd-none' au bouton
                    document.querySelector(".btn-back-top").classList.add('d-none'); 
                }
            };
        });

    // Action au clic : button
        document.querySelector('.btn-back-top').addEventListener('click', e => {
            e.preventDefault();
            // action au clic
            window.scrollTo({
                top:0,
                behavior: 'smooth',
            });
        });
    </script>
</body>
</html>
